app-id: org.mavlink.qgroundcontrol
runtime: org.kde.Platform
runtime-version: '5.15-22.08'
sdk: org.kde.Sdk
command: QGroundControl
rename-appdata-file: org.mavlink.qgroundcontrol.metainfo.xml

finish-args:
- --socket=wayland
- --socket=fallback-x11
- --socket=pulseaudio
- --device=dri
- --share=ipc
- --share=network

modules:
  - name: QGroundControl
    sources:
    - type: git
      url: https://github.com/mavlink/qgroundcontrol.git
      commit: eca2614b6e2a237c3717f246c8c6e42d7d903aaf # Mar 1, 2023
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
    - -D BUILD_SHARED_LIBS=OFF
    - -D OpenGL_GL_PREFERENCE=GLVND
    cleanup:
    - /include
    - /bin/dbf*
    - /bin/shp*
    - /lib/cmake
    - /share/shapelib
    - "*.a"
    - "*.cmake"

  - name: appdata
    sources:
    - type: file
      path: update_appdata.sh
    buildsystem: simple
    build-commands:
    - ./update_appdata.sh /app/share/metainfo/org.mavlink.qgroundcontrol.metainfo.xml
